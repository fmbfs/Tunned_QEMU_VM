'\" t
.\"     Title: trace-cmd-mem
.\"    Author: [see the "AUTHOR" section]
.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
.\"      Date: 03/31/2022
.\"    Manual: \ \&
.\"    Source: \ \&
.\"  Language: English
.\"
.TH "TRACE\-CMD\-MEM" "1" "03/31/2022" "\ \&" "\ \&"
.\" -----------------------------------------------------------------
.\" * Define some portability stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
trace-cmd-mem \- show memory usage of certain kmem events
.SH "SYNOPSIS"
.sp
\fBtrace\-cmd mem\fR [\fIOPTIONS\fR][\fIinput\-file\fR]
.SH "DESCRIPTION"
.sp
The trace\-cmd(1) mem requires a trace\-cmd record that enabled the following events:
.sp
.if n \{\
.RS 4
.\}
.nf
kmalloc
kmalloc_node
kfree
kmem_cache_alloc
kmem_cache_alloc_node
kmem_cache_alloc_free
.fi
.if n \{\
.RE
.\}
.sp
It then reads the amount requested and the ammount freed as well as the functions that called the allocation\&. It then reports the final amount of bytes requested and allocated, along with the total amount allocated and requested, as well as the max allocation and requested during the run\&. It reports the amount of wasted bytes (allocated \- requested) that was not freed, as well as the max wasted amount during the run\&. The list is sorted by descending order of wasted bytes after the run\&.
.sp
.if n \{\
.RS 4
.\}
.nf
        Function                Waste   Alloc   req             TotAlloc     TotReq             MaxAlloc     MaxReq     MaxWaste
        \-\-\-\-\-\-\-\-                \-\-\-\-\-   \-\-\-\-\-   \-\-\-             \-\-\-\-\-\-\-\-     \-\-\-\-\-\-             \-\-\-\-\-\-\-\-     \-\-\-\-\-\-     \-\-\-\-\-\-\-\-
  rb_allocate_cpu_buffer        768     2304    1536                2304       1536                 2304       1536     768
         alloc_pipe_info        400     1152    752                 1152        752                 1152        752     400
          instance_mkdir        252     544     292                  544        292                  544        292     252
               __d_alloc        215     1086560 1086345          1087208    1086993              1086560    1086345     215
          get_empty_filp        72      2304    2232                4864       4712                 4864       4712     152
                mm_alloc        40      960     920                  960        920                  960        920     40
           prepare_creds        32      192     160                 1728       1440                 1728       1440     288
    tracing_buffers_open        8       32      24                    32         24                   32         24     8
                  do_brk        0       0       0                    368        368                  368        368     0
journal_add_journal_head        0       6048    6048                6048       6048                 6048       6048     0
           journal_start        0       0       0                   1224       1224                   48         48     0
     __rb_allocate_pages        0       3289856 3289856          3289856    3289856              3289856    3289856     0
          anon_vma_alloc        0       0       0                    936        936                  864        864     0
                                                        [\&.\&.\&.]
.fi
.if n \{\
.RE
.\}
.SH "OPTIONS"
.PP
\fB\-i\fR \fIinput\-file\fR
.RS 4
By default, trace\-cmd hist will read the file
\fItrace\&.dat\fR\&. But the
\fB\-i\fR
option open up the given
\fIinput\-file\fR
instead\&. Note, the input file may also be specified as the last item on the command line\&.
.RE
.SH "SEE ALSO"
.sp
trace\-cmd(1), trace\-cmd\-record(1), trace\-cmd\-report(1), trace\-cmd\-start(1), trace\-cmd\-stop(1), trace\-cmd\-extract(1), trace\-cmd\-reset(1), trace\-cmd\-hist(1), trace\-cmd\-split(1), trace\-cmd\-listen(1)
.SH "AUTHOR"
.sp
Written by Steven Rostedt, <\m[blue]\fBrostedt@goodmis\&.org\fR\m[]\&\s-2\u[1]\d\s+2>
.SH "RESOURCES"
.sp
\m[blue]\fBhttps://git\&.kernel\&.org/pub/scm/utils/trace\-cmd/trace\-cmd\&.git/\fR\m[]
.SH "COPYING"
.sp
Copyright (C) 2013 Red Hat, Inc\&. Free use of this software is granted under the terms of the GNU Public License (GPL)\&.
.SH "NOTES"
.IP " 1." 4
rostedt@goodmis.org
.RS 4
\%mailto:rostedt@goodmis.org
.RE
